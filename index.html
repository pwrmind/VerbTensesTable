<!DOCTYPE html>
<html lang="ru" ng-app="verbTensesTableApp">
    <head>
        <title>VTT - Verb Tenses Table</title>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
        <style>
            table {
                    width: 100%;
                }

            th, td {
                text-align: center;
            }
        </style>
        <script>

            var verbTensesTableApp = angular.module('verbTensesTableApp', []);

            verbTensesTableApp.controller('MainController', function MainController($scope) {
                function isIrregular ( verb ) {
                    return false;   
                }

                function isVowel ( c ) {
                    var vowelLetters = "aeiou";
                    return vowelLetters.indexOf( c ) > -1;
                }

                function isConsonant ( c ) {
                    return !isVowel( c );
                }

                function getIrregularVerbByTense ( t1, vreb ) {
                    return verb;
                }

                $scope.originalVerb = "play";

                $scope.getVerbByTense = function ( t1, t2, verb ) {
                    if ( t1 === "PAST" ) {
                        if (t2 === "SIMPLE") {
                            console.log("PAST SIMPLE");
                            if( isIrregular ( verb ) ) {
                                return getIrregularVerbByTense ( "PAST" , verb );
                            } else if (verb.endsWith( "e" ) ) {
                                return verb + "d";
                            } else if ( verb.endsWith( "y" ) ) {
                                if ( isVowel( verb.substr( -2, 1 ) ) ) {
                                    return verb + "ed";
                                } else {
                                    return verb.substring( 0, verb.length - 1 ) + "ied";
                                }
                            } else if ( isConsonant( verb.substr( -3, 1 ) ) && isVowel( verb.substr( -2, 1 ) ) && isConsonant( verb.substr( -1, 1 ) ) ) {
                                return verb + verb.substr( -1, 1 ) + "ed";
                            } else {
                                return verb + "ed";
                            }

                        } else if ( t2 === "CONTINUOUS" ) {
                            console.log("PAST CONTINUOUS");
                            return verb;
                        } else if ( t2 === "PERFECT" ) {
                            console.log("PAST PERFECT");
                            return verb;
                        } else if ( t2 === "PERFECTCONTINUOUS" ) {
                            console.log("PAST PERFECT CONTINUOUS");
                            return verb;
                        }
                    } else if ( t1 === "PRESENT" ) {
                        if (t2 === "SIMPLE") {
                            console.log("PRESENT SIMPLE");
                            return verb;
                        } else if ( t2 === "CONTINUOUS" ) {
                            console.log("PRESENT CONTINUOUS");

                            if ( verb.endsWith( "ie" ) ) {
                                return verb.substring( 0, verb.length - 2 ) + "ying";
                            } else if  ( verb.endsWith( "ee" ) ) {
                                return verb + "ing";
                            } else if ( verb.endsWith( "e" ) ) {
                                return verb.substring( 0, verb.length - 1 ) + "ing";
                            } else if ( isConsonant( verb.substr( -3, 1 ) ) && isVowel( verb.substr( -2, 1 ) ) && isConsonant( verb.substr( -1, 1 ) ) ) {
                                if ( verb.endsWith( "y" ) ) {
                                    return verb + "ing";
                                } else {
                                    return verb + verb.substr( -1, 1 ) + "ing";
                                }
                            } else {
                                return verb + "ing";
                            }

                        } else if ( t2 === "PERFECT" ) {
                            console.log("PRESENT PERFECT");
                            return verb;
                        } else if ( t2 === "PERFECTCONTINUOUS" ) {
                            console.log("PRESENT PERFECT CONTINUOUS");
                            return verb;
                        }
                    } else if ( t1 === "FUTURE" ) {
                        if (t2 === "SIMPLE") {
                            console.log("FUTURE SIMPLE");
                            return verb;
                        } else if ( t2 === "CONTINUOUS" ) {
                            console.log("FUTURE CONTINUOUS");
                            return verb;
                        } else if ( t2 === "PERFECT" ) {
                            console.log("FUTURE PERFECT");
                            return verb;
                        } else if ( t2 === "PERFECTCONTINUOUS" ) {
                            console.log("FUTURE PERFECT CONTINUOUS");
                            return verb;
                        }
                    }
                }
            });
            
        </script>
    </head>
    <body>
        <div ng-controller="MainController">
            <input id="originalVerb" ng-model="originalVerb" type="text">
            <div>I {{ getVerbByTense("PAST", "SIMPLE", originalVerb ) }}</div>
            <div>I {{ getVerbByTense("PRESENT", "SIMPLE", originalVerb ) }}</div>
            <div>I will {{ getVerbByTense("FUTURE", "SIMPLE", originalVerb ) }}</div>

            <div>I was {{ getVerbByTense("PAST", "CONTINUOUS", originalVerb ) }}</div>
            <div>I am {{ getVerbByTense("PRESENT", "CONTINUOUS", originalVerb ) }}</div>
            <div>I will be {{ getVerbByTense("FUTURE", "CONTINUOUS", originalVerb ) }}</div>
        </div>
    </body>
</html>
